<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Controlador - Good Call Travel</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            color: #FFC107;
        }
        .section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid #333;
        }
        .section h2 {
            font-size: 16px;
            color: #aaa;
            margin-bottom: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        button {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.1s;
            flex: 1;
            min-width: 120px;
        }
        button:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        .btn-play { background: #4CAF50; color: white; }
        .btn-stop { background: #f44336; color: white; }
        .btn-action { background: #2196F3; color: white; }
        .btn-mute { background: #FF9800; color: white; }
        
        .volume-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 12px;
        }
        .volume-row label {
            font-size: 14px;
            color: #aaa;
            min-width: 60px;
        }
        .volume-row input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: #333;
            border-radius: 4px;
            outline: none;
        }
        .volume-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #FFC107;
            cursor: pointer;
        }
        .volume-row span {
            font-size: 14px;
            min-width: 40px;
            text-align: right;
            color: #FFC107;
        }
        
        #status {
            text-align: center;
            padding: 10px;
            font-size: 13px;
            color: #666;
            margin-top: 10px;
        }
        #status.ok { color: #4CAF50; }
        #status.err { color: #f44336; }
    </style>
</head>
<body>
    <h1>üéÆ CONTROLADOR OVERLAY</h1>

    <!-- CLOUDFLARE AUDIO -->
    <div class="section">
        <h2>üéµ Audio Cloudflare (WAV)</h2>
        <div class="buttons">
            <button class="btn-play" onclick="send('cloudflare','play')">‚ñ∂ Reproducir</button>
            <button class="btn-stop" onclick="send('cloudflare','stop')">‚èπ Detener</button>
        </div>
        <div class="volume-row">
            <label>Volumen:</label>
            <input type="range" min="0" max="100" value="50" id="cfVol" oninput="send('cloudflare','volume',this.value); document.getElementById('cfVolLabel').textContent=this.value+'%'">
            <span id="cfVolLabel">50%</span>
        </div>
    </div>

    <!-- YOUTUBE -->
    <div class="section">
        <h2>üì∫ YouTube</h2>
        <div class="buttons">
            <button class="btn-play" onclick="send('youtube','play')">‚ñ∂ Play</button>
            <button class="btn-stop" onclick="send('youtube','pause')">‚è∏ Pause</button>
            <button class="btn-action" onclick="send('youtube','restart')">üîÅ Restart</button>
        </div>
        <div class="buttons" style="margin-top:10px;">
            <button class="btn-mute" onclick="send('youtube','mute')">üîá Mute</button>
            <button class="btn-play" onclick="send('youtube','unmute')">üîä Unmute</button>
        </div>
        <div class="volume-row">
            <label>Volumen:</label>
            <input type="range" min="0" max="100" value="30" id="ytVol" oninput="send('youtube','volume',this.value); document.getElementById('ytVolLabel').textContent=this.value+'%'">
            <span id="ytVolLabel">30%</span>
        </div>
    </div>

    <div id="status">Esperando conexi√≥n...</div>

    <script>
    var statusEl = document.getElementById('status');
    
    function send(target, action, value) {
        var body = { target: target, action: action };
        if (value !== undefined) body.value = parseInt(value);
        
        fetch('/command', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        })
        .then(function(r) { return r.json(); })
        .then(function(data) {
            statusEl.textContent = '‚úÖ ' + target + ' ‚Üí ' + action + (value ? ' (' + value + ')' : '') + ' ‚Äî ' + new Date().toLocaleTimeString();
            statusEl.className = 'ok';
        })
        .catch(function(err) {
            statusEl.textContent = '‚ùå Error: ' + err.message;
            statusEl.className = 'err';
        });
    }
    
    // Verificar conexi√≥n al servidor
    fetch('/command')
        .then(function() {
            statusEl.textContent = '‚úÖ Conectado al servidor';
            statusEl.className = 'ok';
        })
        .catch(function() {
            statusEl.textContent = '‚ùå No se puede conectar al servidor';
            statusEl.className = 'err';
        });
    </script>
</body>
</html>
